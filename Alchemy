// SPDX-License-Identifier: MIT
pragma solidity ^0.8.28;

import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/token/ERC1155/ERC1155.sol";

contract Xcoin is ERC20, ERC1155 {


    //  Переменные
    address Owner;
    
    uint256 public unicueElement;

    string[] public allBaseElement=["water --> 0", "fire --> 1", "ground --> 2","air -->3"];

    string[][] public arrayBaseElement=[
        ["water", "100", "common"], 
        ["fire", "100", "common"],
        ["ground", "100", "common"],
        ["air", "100", "common"]
        ];

    // Структуры
    struct structElement {
        string name;
        string price; //Строка потому-что в массиве arrayBaseElement - у нас массив строк
        string rarity;
    }


    // Мапинги
    mapping (address => structElement[]) public userElements;
    


    // Модификаторы
    modifier onlyOwner {
        require(msg.sender == Owner, "You are not owner");
        _;
    }

    // Сеттеры
    function setElement(
        uint256 _index,
        uint256 amount) public onlyOwner {

            ERC1155._mint( 
                msg.sender,
                unicueElement,
                amount,
                ""
            );


// Если бы мы просто старались запушить по [_index], то у нас выдалобы ошибку, которая связана с тем, что
// мы по сути просто передадим массив строк, что передасться только в 1 поле структуры, а не по все другие, да и тип данныых 
// там не правильный, поэтому оно впринципе нормально не передасться

        userElements[msg.sender].push(
            structElement(             
                arrayBaseElement[_index][0], // Сначала обращаемся к массиву, затем к элементу массива
                arrayBaseElement[_index][1],
                arrayBaseElement[_index][2]
            )
        );

        unicueElement ++;
    }

    // Геттеры

    function getAllElements() public view returns(string[] memory){
        return allBaseElement;
    }
    

    // Консруктор
    constructor(uint256 initialSupply) ERC20("Xcoin", "X") ERC1155("./Element/") {
        _mint(msg.sender, initialSupply);
        Owner = msg.sender;
    }

}
